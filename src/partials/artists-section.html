<section class="artists" id="Artists">
  <div class="container">
    <h2 class="artists__title">Artists</h2>
    <p class="artists__subtitle">Explore Your New Favorite Artists</p>
    <div class="artists-layout ar">
      <!-- Filters -->
      <aside class="filters" aria-label="Filters">
        <div class="filters__head">
          <h2 class="filters__title" id="filters-title">Filters</h2>
          <button
            type="button"
            class="filters__reset"
            aria-label="Reset all filters"
            disabled
          >
            Reset
          </button>
        </div>

        <!-- Search -->
        <div class="filters__field">
          <input
            id="artist-search"
            class="filters__input"
            type="search"
            name="q"
            placeholder="Search"
            aria-label="Search artists"
          />
          <button type="button" class="filters__search-btn" aria-label="Search">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path
                d="M21 21l-4.2-4.2M11 19a8 8 0 1 1 0-16 8 8 0 0 1 0 16Z"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
          </button>
        </div>

        <!-- Sorting -->
        <div class="filters__select" data-name="sorting">
          <button
            type="button"
            class="filters__select-label"
            aria-haspopup="listbox"
            aria-expanded="false"
            aria-label="Sorting options"
          >
            <span>Sorting</span>
            <svg
              class="filters__chevron"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                d="M7 10l5 5 5-5"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
          </button>
          <ul class="filters__menu" role="listbox" aria-label="Sorting options">
            <li role="option" tabindex="0" data-value="" aria-selected="true">
              Default
            </li>
            <li role="option" tabindex="0" data-value="name_asc">A-Z</li>
            <li role="option" tabindex="0" data-value="name_desc">Z-A</li>
          </ul>
        </div>

        <!-- Genre -->
        <div class="filters__select" data-name="genre">
          <button
            type="button"
            class="filters__select-label"
            aria-haspopup="listbox"
            aria-expanded="false"
            aria-label="Select genre"
          >
            <span>Genre</span>
            <svg
              class="filters__chevron"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                d="M7 10l5 5 5-5"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
          </button>
          <ul
            class="filters__menu"
            data-genres
            role="listbox"
            aria-label="Select genre"
          >
            <!-- Заповнюється динамічно з API -->
          </ul>
        </div>
      </aside>

      <!-- Artists list -->
      <div class="artists-content">
        <!-- ✅ залишаємо тільки один список -->
        <ul class="artists__grid" data-artists-grid></ul>

        <!-- Loader -->
        <div class="artists__loader" data-artists-loader hidden>
          <span class="spinner" aria-hidden="true"></span>
          <span class="sr-only">Loading…</span>
        </div>

        <!-- Load more -->
        <button class="btn btn--primary artists-more" data-artists-load hidden>
          <span data-btn-text>Load More</span>
          <svg class="icon-artists-learn-more" width="14" height="24">
            <use href="/img/icons.svg#icon-learn-more-btn"></use>
          </svg>
          <span class="spinner spinner--btn" data-btn-spinner hidden></span>
        </button>

        <!-- Pagination -->
        <nav class="pagination" data-pagination hidden></nav>
      </div>
    </div>
  </div>
</section>

<!-- Template -->
<template id="artist-item-tpl">
  <li class="artist-card">
    <a href="#" class="artist-card__link">
      <!-- ✅ виправлено: забрав div і замінив на block елемент -->
      <img src="" alt="artist" class="artist-card__img" loading="lazy" />
      <div class="artist-card__info">
        <!-- Замість повторного .artist-card__img -->
        <h3 class="artist-card__name"></h3>
        <p class="artist-card__genre"></p>
      </div>
    </a>
  </li>
</template>
<script>
  // Беремо елементи
  const grid = document.querySelector('[data-artists-grid]');
  const loader = document.querySelector('[data-artists-loader]');
  const loadMoreBtn = document.querySelector('[data-artists-load]');
  const artistTpl = document.querySelector('#artist-item-tpl');

  // Тимчасові дані (приклад). Ти тут можеш підставити дані з API.
  const artists = [
    {
      name: 'Eminem',
      genre: 'Rap',
      image: 'https://via.placeholder.com/300x200?text=Eminem',
    },
    {
      name: 'Adele',
      genre: 'Pop',
      image: 'https://via.placeholder.com/300x200?text=Adele',
    },
    {
      name: 'Imagine Dragons',
      genre: 'Rock',
      image: 'https://via.placeholder.com/300x200?text=Imagine+Dragons',
    },
    {
      name: 'Beyoncé',
      genre: 'R&B',
      image: 'https://via.placeholder.com/300x200?text=Beyonce',
    },
  ];

  // Поточна сторінка
  let page = 1;
  const perPage = 2;

  // Функція рендеру артистів
  function renderArtists(list) {
    list.forEach(artist => {
      const clone = artistTpl.content.cloneNode(true);

      const link = clone.querySelector('.artist-card__link');
      const img = clone.querySelector('.artist-card__img');
      const name = clone.querySelector('.artist-card__name');
      const genre = clone.querySelector('.artist-card__genre');

      // Заповнюємо дані
      link.href = '#'; // тут можна зробити посилання на сторінку артиста
      img.src = artist.image;
      img.alt = artist.name;
      name.textContent = artist.name;
      genre.textContent = artist.genre;

      grid.appendChild(clone);
    });
  }

  // Функція завантаження (імітація API)
  function loadArtists() {
    loader.hidden = false;
    setTimeout(() => {
      loader.hidden = true;

      // Вираховуємо дані для сторінки
      const start = (page - 1) * perPage;
      const end = start + perPage;
      const slice = artists.slice(start, end);

      renderArtists(slice);

      // Якщо ще є дані → показати кнопку
      if (end < artists.length) {
        loadMoreBtn.hidden = false;
      } else {
        loadMoreBtn.hidden = true;
      }

      page++;
    }, 700); // імітація завантаження
  }

  // Подія на кнопку "Load More"
  loadMoreBtn.addEventListener('click', loadArtists);

  // При завантаженні сторінки
  document.addEventListener('DOMContentLoaded', () => {
    loadArtists();
  });
</script>
