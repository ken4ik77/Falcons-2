{"version":3,"file":"index.js","sources":["../src/js/feedback.js","../src/js/artists-section.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport Swiper from 'swiper';\nimport Raty from 'raty-js';\n\nimport { Navigation, Pagination } from 'swiper/modules';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\n// import 'raty-js/src/raty.css';\n\nexport async function getReviewsByQuery() {\n    const response = await axios.get('/feedbacks', {\n        params: { limit: 10, page: 1 },\n    });\n    return response.data;\n}\n\nexport async function handleReviews(reviews) {\n    const wrapper = document.querySelector('div.swiper-wrapper');\n\n    const markup = reviews.map(({ name, rating, descr }, index) =>\n        `<div class=\"swiper-slide\">\n            <div class=\"rating\" id=\"rating\">\n                <div class=\"stars-container stars-${index}\">\n                </div>\n            </div>\n            <p class=\"review\">\"${descr}\"</p>\n            <p class=\"review-author-name\">${name}</p>\n        </div>`\n    ).join('');\n\n    wrapper.insertAdjacentHTML('beforeend', markup);\n\n    reviews.forEach((review, index) => {\n        setRating(review.rating, index)\n    });\n\n    const swiper = new Swiper('.swiper', {\n        modules: [Navigation, Pagination],\n        direction: 'horizontal',\n        loop: true,\n        pagination: {\n            el: '.swiper-pagination',\n            type: 'bullets',\n            clickable: true,\n            dynamicBullets: true,\n            dynamicMainBullets: 1, \n        },\n        navigation: {\n            nextEl: '.swiper-button-next',\n            prevEl: '.swiper-button-prev',\n        }\n    });\n\n    document.querySelector('.swiper-button-next').addEventListener('click', () => swiper.slideNext());\n    document.querySelector('.swiper-button-prev').addEventListener('click', () => swiper.slidePrev());\n}\n\nfunction setRating(rating, index) {\n    const starsContainer = document.querySelector(`div.stars-${index}`);\n    const fullStars = Math.round(rating);\n    const emptyStars = 5 - fullStars;\n\n    starsContainer.innerHTML = '';\n\n    for (let i = 0; i < fullStars; i++) {\n        const star = document.createElement('div');\n        star.classList.add('star-container');\n        star.innerHTML = `\n            <svg class=\"star my-star-filled\">\n                <use href=\"../img/icons.svg#icon-star\"></use>\n            </svg>`;\n        starsContainer.appendChild(star);\n    }\n\n    for (let i = 0; i < emptyStars; i++) {\n        const star = document.createElement('div');\n        star.classList.add('star-container');\n        star.innerHTML = `\n            <svg class=\"star my-star-empty\">\n                <use href=\"../img/icons.svg#icon-star\"></use>\n            </svg>`;\n        starsContainer.appendChild(star);\n    }\n}\n","import axios from 'axios';\n\nconst BASE_URL = 'https://sound-wave.b.goit.study/api';\nconst LIMIT = 8;\n\nconst api = axios.create({\n  baseURL: BASE_URL,\n  timeout: 10000,\n  headers: { 'Content-Type': 'application/json' },\n});\n\nexport async function getArtists(page = 1, limit = LIMIT) {\n  const response = await api.get('/artists', {\n    params: { page, limit },\n  });\n  return response.data;\n}\n\nfunction createArtistCard(artist) {\n  return `\n    <div class=\"artist-card\">\n      <img class=\"artist-photo\" src=\"${artist.strArtistThumb || 'https://via.placeholder.com/150'}\" alt=\"${artist.strArtist}\" />\n\n      <div class=\"artist-genres\">\n        ${artist.genres\n          ?.map(genre => `<span>${genre}</span>`)\n          .join('') || ''}\n      </div>\n\n      <h3 class=\"artist-name\">${artist.strArtist}</h3>\n      <p class=\"artist-description\">\n        ${artist.strBiographyEN ? artist.strBiographyEN.slice(0, 100) + '...' : 'No description'}\n      </p>\n\n      <button class=\"learn-more\" data-id=\"${artist._id}\">\n        Learn More\n        <svg class=\"icon-artists-learn-more\" width=\"24\" height=\"24\">\n                <use href=\"/img/icons.svg#icon-learn-more\"></use>\n              </svg>\n      </button>\n    </div>\n  `;\n}\n\n\nconst grid = document.querySelector('[data-artists-grid]');\nconst loadMoreBtn = document.querySelector('[data-artists-load]');\nconst loader = document.querySelector('[data-artists-loader]');\n\nlet currentPage = 1;\n\nasync function renderArtists(page = 1) {\n  loader.hidden = false;\n  loadMoreBtn.hidden = true;\n  \n  try {\n    const data = await getArtists(page);\n    console.log('API response:', data);\n\n    grid.insertAdjacentHTML(\n      'beforeend',\n      data.artists.map(createArtistCard).join('')\n    );\n\n    if (page * LIMIT < data.totalArtists) {\n      loadMoreBtn.hidden = false;\n    }\n  } catch (err) {\n    console.error('Помилка завантаження артистів:', err);\n  } finally {\n    loader.hidden = true;\n  }\n}\n\nloadMoreBtn?.addEventListener('click', async () => {\n  currentPage++;\n  await renderArtists(currentPage);\n});\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  renderArtists(currentPage);\n});\n\n\n\n\ngrid.addEventListener('click', async e => {\n  if (e.target.matches('.learn-more')) {\n    const artistId = e.target.dataset.id;\n    try {\n      const response = await api.get(`/artists/${artistId}`);\n      const artist = response.data;\n\n      const modalContent = document.querySelector('[data-modal-content]');\n      modalContent.innerHTML = `\n        <img src=\"${artist.photo}\" alt=\"${artist.name}\"/>\n        <h2>${artist.name}</h2>\n        <p>${artist.description}</p>\n      `;\n\n      document.querySelector('[data-modal]').classList.add('is-open');\n    } catch (err) {\n      console.error('Не вдалося завантажити артиста:', err);\n    }\n  }\n});","import axios from \"axios\";\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getReviewsByQuery, handleReviews } from './js/feedback.js';\n\n// import './js/menu'\n// import './js/modal'\nimport './js/feedback'\n// import './js/modal-feedback'\nimport './js/artists-section.js'\n\n\naxios.defaults.baseURL = \"https://sound-wave.b.goit.study/api\";\n\nasync function fetchData() {\n    const reviews = await getReviewsByQuery();\n    console.log(reviews);\n    await handleReviews(reviews.data);\n}\n\nfetchData();\n"],"names":["getReviewsByQuery","axios","handleReviews","reviews","wrapper","markup","name","rating","descr","index","review","setRating","swiper","Swiper","Navigation","Pagination","starsContainer","fullStars","emptyStars","i","star","BASE_URL","LIMIT","api","getArtists","page","limit","createArtistCard","artist","_a","genre","grid","loadMoreBtn","loader","currentPage","renderArtists","data","err","artistId","modalContent","fetchData"],"mappings":"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"}