{"version":3,"file":"index.js","sources":["../src/js/artists-section.js","../src/js/modal-feedback.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://sound-wave.b.goit.study/api';\nconst LIMIT = 8;\n\nconst api = axios.create({\n  baseURL: BASE_URL,\n  timeout: 10000,\n  headers: { 'Content-Type': 'application/json' },\n});\n\nexport async function getArtists(page = 1, limit = LIMIT) {\n  const response = await api.get('/artists', {\n    params: { page, limit },\n  });\n  return response.data;\n}\n\nfunction createArtistCard(artist) {\n  return `\n    <div class=\"artist-card\">\n      <img class=\"artist-photo\" src=\"${artist.strArtistThumb || 'https://via.placeholder.com/150'}\" alt=\"${artist.strArtist}\" />\n\n      <div class=\"artist-genres\">\n        ${artist.genres\n          ?.map(genre => `<span>${genre}</span>`)\n          .join('') || ''}\n      </div>\n\n      <h3 class=\"artist-name\">${artist.strArtist}</h3>\n      <p class=\"artist-description\">\n        ${artist.strBiographyEN ? artist.strBiographyEN.slice(0, 100) + '...' : 'No description'}\n      </p>\n\n      <button class=\"learn-more\" data-id=\"${artist._id}\">\n        Learn More\n        <svg class=\"icon-artists-learn-more\" width=\"24\" height=\"24\">\n                <use href=\"/img/icons.svg#icon-learn-more\"></use>\n              </svg>\n      </button>\n    </div>\n  `;\n}\n\n\nconst grid = document.querySelector('[data-artists-grid]');\nconst loadMoreBtn = document.querySelector('[data-artists-load]');\nconst loader = document.querySelector('[data-artists-loader]');\n\nlet currentPage = 1;\n\nasync function renderArtists(page = 1) {\n  loader.hidden = false;\n  loadMoreBtn.hidden = true;\n  \n  try {\n    const data = await getArtists(page);\n    console.log('API response:', data);\n\n    grid.insertAdjacentHTML(\n      'beforeend',\n      data.artists.map(createArtistCard).join('')\n    );\n\n    if (page * LIMIT < data.totalArtists) {\n      loadMoreBtn.hidden = false;\n    }\n  } catch (err) {\n    console.error('Помилка завантаження артистів:', err);\n  } finally {\n    loader.hidden = true;\n  }\n}\n\nloadMoreBtn?.addEventListener('click', async () => {\n  currentPage++;\n  await renderArtists(currentPage);\n});\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  renderArtists(currentPage);\n});\n\n\n\n\ngrid.addEventListener('click', async e => {\n  if (e.target.matches('.learn-more')) {\n    const artistId = e.target.dataset.id;\n    try {\n      const response = await api.get(`/artists/${artistId}`);\n      const artist = response.data;\n\n      const modalContent = document.querySelector('[data-modal-content]');\n      modalContent.innerHTML = `\n        <img src=\"${artist.photo}\" alt=\"${artist.name}\"/>\n        <h2>${artist.name}</h2>\n        <p>${artist.description}</p>\n      `;\n\n      document.querySelector('[data-modal]').classList.add('is-open');\n    } catch (err) {\n      console.error('Не вдалося завантажити артиста:', err);\n    }\n  }\n});","(() => {\n  const refs = {\n    openModalBtn: document.querySelector(\"[data-modal-feedback-open]\"),\n    closeModalBtn: document.querySelector(\"[data-modal-feedback-close]\"),\n    modal: document.querySelector(\"[data-modal-feedback]\"),\n    form: document.querySelector(\".feedback-form\"),\n  };\n\n  refs.openModalBtn.addEventListener(\"click\", toggleModal);\n  refs.closeModalBtn.addEventListener(\"click\", toggleModal);\n\n  // закрытие по backdrop\n  refs.modal.addEventListener(\"click\", (e) => {\n    if (e.target === refs.modal) closeModal();\n  });\n\n  // закрытие по Escape\n  document.addEventListener(\"keydown\", (e) => {\n    if (e.key === \"Escape\" && !refs.modal.classList.contains(\"is-hidden\")) {\n      closeModal();\n    }\n  });\n\n  function toggleModal() {\n    refs.modal.classList.toggle(\"is-hidden\");\n    document.body.classList.toggle(\"no-scroll\");\n  }\n\n  function closeModal() {\n    refs.modal.classList.add(\"is-hidden\");\n    document.body.classList.remove(\"no-scroll\");\n  }\n\n  // рейтинг\n  const stars = document.querySelectorAll(\".rating .star\");\n  let currentRating = 0;\n\n  stars.forEach((star, index) => {\n    star.addEventListener(\"click\", () => {\n      currentRating = index + 1;\n      stars.forEach((s, i) => {\n        s.classList.toggle(\"active\", i < currentRating);\n      });\n    });\n  });\n\n  // отправка формы\n  refs.form.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n\n    const name = refs.form.elements[\"name\"].value.trim();\n    const descr = refs.form.elements[\"message\"].value.trim();\n    const rating = currentRating;\n\n      \n    if (name.length < 2 || name.length > 16) {\n      alert(\"Ім’я має бути від 2 до 16 символів.\");\n      return;\n    }\n    if (rating < 1 || rating > 5) {\n      alert(\"Оберіть рейтинг від 1 до 5 зірок.\");\n      return;\n    }\n    if (descr.length < 10 || descr.length > 512) {\n      alert(\"Повідомлення має бути від 10 до 512 символів.\");\n      return;\n    }\n\n    try {\n      const res = await fetch(\"-\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ name, rating, descr }),\n      });\n\n      if (!res.ok) throw new Error(\"Помилка сервера\");\n\n      closeModal();\n      refs.form.reset();\n      currentRating = 0;\n      stars.forEach((s) => s.classList.remove(\"active\"));\n\n      alert(\"Дякуємо за відгук!\");\n    } catch (err) {\n      alert(\"Не вдалося відправити відгук: \" + err.message);\n    }\n  });\n})();\n"],"names":["BASE_URL","LIMIT","api","axios","getArtists","page","limit","createArtistCard","artist","_a","genre","grid","loadMoreBtn","loader","currentPage","renderArtists","data","err","artistId","modalContent","refs","toggleModal","e","closeModal","stars","currentRating","star","index","s","name","descr","rating"],"mappings":"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"}